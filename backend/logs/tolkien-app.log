2025-10-24T11:51:25.470+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Starting TolkienPetsApplicationTests using Java 21.0.8 with PID 28332 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T11:51:25.471+02:00 DEBUG 28332 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T11:51:25.472+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : The following 1 profile is active: "dev"
2025-10-24T11:51:26.809+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T11:51:26.869+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 54 ms. Found 3 JPA repository interfaces.
2025-10-24T11:51:27.376+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T11:51:27.451+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-24T11:51:27.481+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T11:51:27.795+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T11:51:27.816+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-24T11:51:27.975+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42e202d7
2025-10-24T11:51:27.981+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-24T11:51:28.065+02:00  WARN 28332 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T11:51:28.789+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T11:51:28.844+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T11:51:30.132+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Started TolkienPetsApplicationTests in 4.935 seconds (process running for 6.348)
2025-10-24T11:51:30.661+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T11:51:30.663+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-24T11:51:30.668+02:00  INFO 28332 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-24T12:14:23.808+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] c.t.p.TolkienVirtualPetsApiApplication   : Starting TolkienVirtualPetsApiApplication using Java 21.0.8 with PID 33924 (C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend\target\classes started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T12:14:23.809+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [main] c.t.p.TolkienVirtualPetsApiApplication   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T12:14:23.810+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] c.t.p.TolkienVirtualPetsApiApplication   : The following 1 profile is active: "dev"
2025-10-24T12:14:24.548+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T12:14:24.616+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 3 JPA repository interfaces.
2025-10-24T12:14:25.016+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-10-24T12:14:25.026+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-10-24T12:14:25.026+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.30]
2025-10-24T12:14:25.064+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-10-24T12:14:25.065+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1226 ms
2025-10-24T12:14:25.164+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T12:14:25.203+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-24T12:14:25.224+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T12:14:25.420+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T12:14:25.478+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-24T12:14:25.617+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e090aaa
2025-10-24T12:14:25.619+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-24T12:14:25.648+02:00  WARN 33924 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T12:14:26.459+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T12:14:26.508+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T12:14:26.705+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T12:14:27.425+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-10-24T12:14:27.433+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [main] c.t.p.TolkienVirtualPetsApiApplication   : Started TolkienVirtualPetsApiApplication in 3.993 seconds (process running for 4.256)
2025-10-24T12:18:04.502+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-24T12:18:04.509+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-10-24T12:18:04.511+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-10-24T12:18:04.706+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-3] c.t.pets.controller.AuthController       : Login attempt email=admin@shire.me
2025-10-24T12:18:04.889+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-3] c.t.pets.controller.AuthController       : Login success email=admin@shire.me
2025-10-24T12:18:10.417+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:10.430+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T12:18:10.468+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:15.593+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-7] c.t.pets.controller.CreatureController   : User admin@shire.me requesting creature details id=14
2025-10-24T12:18:15.598+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-7] c.t.p.service.impl.CreatureServiceImpl   : üîç Fetching creature by ID 14 (from DB)
2025-10-24T12:18:15.619+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-7] c.t.pets.controller.CreatureController   : Creature retrieved successfully id=14, owner=admin@shire.me
2025-10-24T12:18:18.687+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : User admin@shire.me training creature id=14
2025-10-24T12:18:18.690+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.p.service.impl.CreatureServiceImpl   : üèãÔ∏è Training creature 14 by user admin@shire.me
2025-10-24T12:18:18.724+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 14 trained. New level: 1
2025-10-24T12:18:18.797+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : Creature trained id=14, level=1, XP=10
2025-10-24T12:18:18.841+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-9] c.t.pets.controller.CreatureController   : User admin@shire.me requesting creature details id=14
2025-10-24T12:18:18.847+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:18.850+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T12:18:18.851+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-9] c.t.pets.controller.CreatureController   : Creature retrieved successfully id=14, owner=admin@shire.me
2025-10-24T12:18:18.866+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:21.006+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-3] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:21.006+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-3] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:26.843+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : User admin@shire.me resting creature id=14
2025-10-24T12:18:26.846+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.p.service.impl.CreatureServiceImpl   : üò¥ Resting creature 14 by user admin@shire.me
2025-10-24T12:18:26.858+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 14 rested. Current health: 110
2025-10-24T12:18:26.891+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : Creature rested id=14, newHealth=110
2025-10-24T12:18:26.945+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:26.948+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T12:18:26.951+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-6] c.t.pets.controller.CreatureController   : User admin@shire.me requesting creature details id=14
2025-10-24T12:18:26.955+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-6] c.t.pets.controller.CreatureController   : Creature retrieved successfully id=14, owner=admin@shire.me
2025-10-24T12:18:26.965+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:32.645+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:32.648+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:55.231+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-4] c.t.pets.controller.CreatureController   : User admin@shire.me resolving combat for creature id=4, damageReceived=73, won=true
2025-10-24T12:18:55.231+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : User admin@shire.me resolving combat for creature id=28, damageReceived=111, won=false
2025-10-24T12:18:55.234+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-4] c.t.p.service.impl.CreatureServiceImpl   : ‚öîÔ∏è Resolving combat for creature 4 (won: true)
2025-10-24T12:18:55.234+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.p.service.impl.CreatureServiceImpl   : ‚öîÔ∏è Resolving combat for creature 28 (won: false)
2025-10-24T12:18:55.257+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Combat resolved for creature 28 (Health: 0)
2025-10-24T12:18:55.257+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-4] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Combat resolved for creature 4 (Health: 57)
2025-10-24T12:18:55.282+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-2] c.t.pets.controller.CreatureController   : Combat resolved for creature id=28, newHealth=0, newXP=0
2025-10-24T12:18:55.287+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-4] c.t.pets.controller.CreatureController   : Combat resolved for creature id=4, newHealth=57, newXP=40
2025-10-24T12:18:55.335+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-6] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:55.336+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:55.340+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-6] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T12:18:55.341+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T12:18:55.351+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-6] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:55.351+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-5] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:55.367+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-9] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:55.367+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : Fetching all creatures for user admin@shire.me
2025-10-24T12:18:55.370+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-10] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T12:18:55.370+02:00 DEBUG 33924 --- [tolkien-virtual-pets-api] [http-nio-8080-exec-9] c.t.pets.controller.CreatureController   : User admin@shire.me has 6 creatures
2025-10-24T13:17:53.474+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:17:53.490+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-24T13:17:53.508+02:00  INFO 33924 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-24T13:20:58.384+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:20:58.385+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:20:58.385+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:20:59.151+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:20:59.199+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 3 JPA repository interfaces.
2025-10-24T13:20:59.760+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:20:59.855+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-24T13:20:59.886+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:00.146+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:00.164+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-24T13:21:00.306+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:00.307+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-24T13:21:00.328+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:01.126+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:01.136+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:01.140+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:01.141+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:01.141+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:01.144+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:01.152+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:01.154+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:01.154+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:01.156+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:01.164+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:01.165+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:01.168+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:02.679+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:02.680+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:02.680+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:02.681+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:21:02.698+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 4.572 seconds (process running for 6.249)
2025-10-24T13:21:02.805+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:02.898+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:02.913+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:02.914+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:03.419+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:03.475+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:03.576+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:03.647+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:03.647+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:03.648+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:03.650+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:03.651+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:03.652+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-24T13:21:03.654+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-24T13:21:03.701+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:03.701+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:03.702+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:21:03.833+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:03.844+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:03.893+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:03.895+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:03.900+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:03.901+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-10-24T13:21:03.901+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:03.901+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-10-24T13:21:03.902+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:03.956+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:03.956+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:03.957+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:03.957+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:03.957+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:03.958+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:03.959+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:03.960+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:03.961+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:03.962+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:03.963+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:03.964+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:03.966+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:04.114+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:04.114+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:04.114+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:04.114+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:04.119+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.453 seconds (process running for 7.669)
2025-10-24T13:21:04.121+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:04.174+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.175+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:04.175+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:04.232+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.281+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.286+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:04.302+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:04.302+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:04.303+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:04.304+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:04.304+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:04.306+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-10-24T13:21:04.306+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-10-24T13:21:04.336+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:04.336+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:04.336+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:21:04.455+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:04.467+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 11 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:04.509+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:04.511+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:04.517+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:04.518+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-10-24T13:21:04.518+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:04.519+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-10-24T13:21:04.519+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:04.573+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:04.574+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:04.574+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:04.574+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:04.574+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:04.575+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:04.577+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:04.577+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:04.578+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:04.579+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:04.580+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:04.580+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:04.581+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:04.728+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:04.728+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:04.728+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:04.728+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:04.737+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.426 seconds (process running for 8.288)
2025-10-24T13:21:04.739+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:04.792+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.793+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:04.794+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:04.848+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.900+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:04.906+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:04.914+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:04.915+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:04.915+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:04.916+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:04.916+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:04.917+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-10-24T13:21:04.925+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-10-24T13:21:04.943+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:04.943+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:04.943+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:21:05.033+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:05.042+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:05.078+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:05.080+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:05.086+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:05.087+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-10-24T13:21:05.087+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:05.087+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-10-24T13:21:05.088+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:05.151+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:05.151+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:05.152+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:05.152+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:05.152+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:05.153+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:05.153+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:05.154+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:05.155+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:05.155+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:05.156+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:05.158+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:05.159+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:05.271+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:05.271+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:05.271+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:05.271+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:05.276+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.349 seconds (process running for 8.826)
2025-10-24T13:21:05.278+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:05.329+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:05.330+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:05.331+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:05.383+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:05.437+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:05.444+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:05.458+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:05.458+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:05.460+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:05.460+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:05.461+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:05.461+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-10-24T13:21:05.503+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-10-24T13:21:05.553+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:05.553+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:05.553+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:21:05.640+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:05.650+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:05.684+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:05.686+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:05.691+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:05.691+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-10-24T13:21:05.692+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:05.693+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-10-24T13:21:05.693+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:05.739+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:05.740+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:05.740+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:05.740+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:05.740+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:05.740+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:05.742+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:05.742+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:05.743+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:05.744+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:05.745+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:05.746+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:05.747+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:05.857+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:05.857+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:05.857+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:05.857+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:05.860+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.348 seconds (process running for 9.411)
2025-10-24T13:21:05.862+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:05.914+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:05.916+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:05.916+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:05.974+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:06.036+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:06.040+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:06.050+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:06.050+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:06.051+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:06.052+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:06.053+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:06.053+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-10-24T13:21:06.067+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-10-24T13:21:06.074+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.AuthIntegrationTest]: AuthIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:21:06.078+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.AuthIntegrationTest
2025-10-24T13:21:06.097+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:06.097+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:06.097+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:21:06.187+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:06.195+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:06.224+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:06.225+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:06.232+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:06.232+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-10-24T13:21:06.233+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection conn49: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:06.233+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-10-24T13:21:06.233+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:06.269+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:06.269+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:06.269+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:06.270+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:06.270+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:06.270+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:06.271+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:06.271+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:06.271+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:06.272+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:06.272+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:06.273+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:06.274+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:06.384+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:06.384+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:06.384+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:06.385+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:21:06.388+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.309 seconds (process running for 9.938)
2025-10-24T13:21:06.390+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:06.440+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:06.441+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:06.441+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:06.499+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:06.535+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:21:06.536+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:06.588+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login success email=frodo@shire.me
2025-10-24T13:21:06.619+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:06.619+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:06.619+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:06.620+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:06.620+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:06.620+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-10-24T13:21:06.631+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2025-10-24T13:21:06.645+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:06.646+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:06.646+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:21:06.720+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:06.729+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:06.764+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:06.765+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:06.769+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:06.769+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-10-24T13:21:06.770+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection conn59: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:06.770+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-10-24T13:21:06.770+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:06.808+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:06.808+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:06.808+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:06.808+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:06.808+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:06.808+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:06.809+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:06.810+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:06.810+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:06.811+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:06.812+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:06.813+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:06.814+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:06.915+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:06.915+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:06.915+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:06.916+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:21:06.919+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.286 seconds (process running for 10.469)
2025-10-24T13:21:06.920+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:06.971+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:06.973+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:06.973+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:07.027+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:07.031+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=gandalf@valinor.me
2025-10-24T13:21:07.032+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:07.038+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:07.038+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:07.038+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:07.039+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:07.039+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:07.040+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-10-24T13:21:07.042+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2025-10-24T13:21:07.057+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:07.057+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:07.057+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:21:07.138+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:07.145+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:07.175+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:07.177+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:07.181+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:07.182+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-10-24T13:21:07.182+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection conn65: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:07.182+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-10-24T13:21:07.183+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:07.228+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:07.228+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:07.228+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:07.229+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:07.229+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:07.229+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:07.230+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:07.230+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:07.230+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:07.231+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:07.232+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:07.233+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:07.234+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:07.331+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:07.332+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:07.332+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:07.332+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:07.335+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.291 seconds (process running for 10.885)
2025-10-24T13:21:07.337+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:07.390+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:07.391+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:07.391+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:07.443+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:07.447+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:21:07.450+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:07.504+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:07.505+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:07.505+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:07.505+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:07.505+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:07.506+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-10-24T13:21:07.512+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2025-10-24T13:21:07.515+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.CreatureIntegrationTest]: CreatureIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:21:07.518+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.CreatureIntegrationTest
2025-10-24T13:21:07.536+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:07.536+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:07.536+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:21:07.611+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:07.620+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:07.646+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:07.648+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:07.651+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:07.652+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-10-24T13:21:07.652+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection conn73: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:07.652+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-10-24T13:21:07.653+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:07.691+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:07.691+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:07.691+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:07.692+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:07.692+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:07.692+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:07.693+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:07.693+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:07.694+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:07.694+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:07.695+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:07.696+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:07.697+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:07.790+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:07.790+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:07.790+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:07.791+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:21:07.794+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.275 seconds (process running for 11.344)
2025-10-24T13:21:07.795+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:07.846+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:07.847+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:07.848+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:07.899+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:07.904+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:07.904+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:07.904+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:07.904+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:07.904+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:07.905+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-10-24T13:21:07.921+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2025-10-24T13:21:07.941+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:07.941+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:07.941+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:21:08.008+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:08.015+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:08.039+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:08.041+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:08.045+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:08.046+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-10-24T13:21:08.047+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection conn79: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:08.047+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-10-24T13:21:08.047+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:08.078+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:08.078+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:08.079+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:08.079+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:08.079+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:08.079+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:08.080+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:08.080+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:08.081+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:08.081+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:08.082+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.083+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.083+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:08.175+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:08.175+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:08.175+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:08.175+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:08.178+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.255 seconds (process running for 11.728)
2025-10-24T13:21:08.180+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:08.231+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:08.232+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:08.232+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:08.283+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:08.288+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:08.296+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:08.296+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:08.296+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:08.297+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:08.297+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:08.297+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-10-24T13:21:08.312+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2025-10-24T13:21:08.334+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:08.334+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:08.334+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:21:08.399+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:08.406+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:08.430+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:08.432+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:08.436+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:08.436+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2025-10-24T13:21:08.437+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection conn85: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:08.437+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2025-10-24T13:21:08.438+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:08.468+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:08.468+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:08.468+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:08.468+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:08.468+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:08.469+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:08.470+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:08.471+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:08.472+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:08.472+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:08.473+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.474+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.476+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:08.564+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:08.564+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:08.564+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:08.564+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:21:08.567+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.252 seconds (process running for 12.117)
2025-10-24T13:21:08.568+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:08.618+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:08.620+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:08.620+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:08.670+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:08.674+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:08.683+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:08.683+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:08.683+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:08.683+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:08.684+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:08.684+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2025-10-24T13:21:08.703+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2025-10-24T13:21:08.722+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:08.722+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:08.722+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:21:08.795+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:08.803+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:08.829+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:08.831+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:08.835+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:08.835+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2025-10-24T13:21:08.836+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection conn91: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:08.836+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2025-10-24T13:21:08.836+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:08.871+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:08.872+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:08.872+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:08.872+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:08.872+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:08.872+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:08.873+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:08.874+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:08.875+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:08.876+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:08.876+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.877+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:08.878+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:08.972+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:21:08.972+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:21:08.972+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:21:08.973+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:21:08.976+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.271 seconds (process running for 12.526)
2025-10-24T13:21:08.978+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:09.028+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:09.029+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:09.029+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:09.086+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:09.090+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:09.102+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:09.102+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:09.103+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:09.103+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:09.104+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:09.105+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2025-10-24T13:21:09.127+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2025-10-24T13:21:09.136+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.TolkienPetsApplicationTests]: TolkienPetsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:21:09.139+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.TolkienPetsApplicationTests
2025-10-24T13:21:09.167+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Starting TolkienPetsApplicationTests using Java 21.0.8 with PID 38296 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:21:09.167+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:21:09.167+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : The following 1 profile is active: "test"
2025-10-24T13:21:09.227+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:21:09.234+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:21:09.257+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:21:09.258+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:21:09.262+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:21:09.263+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2025-10-24T13:21:09.263+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection conn98: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:21:09.263+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2025-10-24T13:21:09.263+02:00  WARN 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:21:09.293+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:21:09.293+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:09.294+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:09.294+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:09.294+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:09.294+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:21:09.294+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:21:09.295+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:21:09.295+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:21:09.296+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:21:09.296+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:21:09.297+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:21:09.298+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:09.386+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Started TolkienPetsApplicationTests in 0.242 seconds (process running for 12.936)
2025-10-24T13:21:09.387+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:21:09.438+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:21:09.439+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:09.439+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:21:09.472+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:21:09.473+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:21:09.473+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:21:09.473+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:21:09.473+02:00 DEBUG 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:21:09.474+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2025-10-24T13:21:09.505+02:00  INFO 38296 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2025-10-24T13:33:28.480+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:28.481+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:28.481+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:33:29.190+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:29.238+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:29.851+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:29.953+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-24T13:33:29.974+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:30.209+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:30.227+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-24T13:33:30.347+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:30.348+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-24T13:33:30.362+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:31.079+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:31.091+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:31.094+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:31.095+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:31.095+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:31.099+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:31.110+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:31.113+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:31.113+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:31.114+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:31.126+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:31.128+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:31.131+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:32.769+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:32.770+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:32.771+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:32.772+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:32.793+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 4.563 seconds (process running for 5.42)
2025-10-24T13:33:32.895+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:32.985+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:33.000+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:33.001+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:33.472+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:33.524+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:33.600+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:33.640+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:33:33.643+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:33:33.645+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:33.647+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:33.649+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:33:33.649+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:33:33.674+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:33.677+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin attempting to delete creature with ID=1
2025-10-24T13:33:33.677+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è [ADMIN] Deleting creature ID 1
2025-10-24T13:33:33.685+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Creature deleted successfully by admin: ID=1
2025-10-24T13:33:33.730+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:33.731+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:33.732+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:33.733+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:33.734+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:33.736+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-24T13:33:33.739+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-24T13:33:33.801+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:33.801+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:33.801+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:33:33.961+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:33.973+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 12 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:34.021+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:34.030+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:34.035+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:34.035+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-10-24T13:33:34.036+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:34.036+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-10-24T13:33:34.037+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:34.085+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:34.086+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:34.086+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:34.086+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:34.086+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:34.087+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:34.088+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:34.089+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:34.089+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:34.090+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:34.091+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:34.092+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:34.093+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:34.217+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:34.217+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:34.217+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:34.217+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:34.221+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.459 seconds (process running for 6.847)
2025-10-24T13:33:34.223+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.274+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.275+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:34.275+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:34.329+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.380+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.386+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.390+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:33:34.391+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:33:34.392+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.393+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:34.394+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:33:34.394+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:33:34.403+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.409+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:34.409+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:34.410+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:34.410+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:34.411+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:34.412+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-10-24T13:33:34.420+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-10-24T13:33:34.440+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:34.440+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:34.440+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:33:34.549+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:34.559+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:34.597+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:34.600+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:34.606+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:34.606+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-10-24T13:33:34.607+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn19: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:34.608+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-10-24T13:33:34.608+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:34.662+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:34.662+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:34.663+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:34.663+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:34.663+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:34.663+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:34.664+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:34.665+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:34.666+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:34.666+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:34.667+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:34.667+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:34.668+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:34.800+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:34.800+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:34.800+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:34.801+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:33:34.805+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.383 seconds (process running for 7.432)
2025-10-24T13:33:34.806+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.861+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.863+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:34.863+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:34.918+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.969+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:34.974+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.977+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:33:34.978+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:33:34.979+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.979+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:34.980+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:33:34.980+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:33:34.986+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:34.988+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin fetching creatures for user ID=2
2025-10-24T13:33:34.990+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T13:33:34.995+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0 
    where
        c1_0.owner_id=?
2025-10-24T13:33:34.996+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Found 1 creatures for user ID=2
2025-10-24T13:33:35.020+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:35.020+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:35.021+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:35.021+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:35.022+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:35.022+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-10-24T13:33:35.023+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-10-24T13:33:35.039+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:35.039+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:35.039+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:33:35.133+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:35.143+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:35.179+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:35.181+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:35.188+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:35.189+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-10-24T13:33:35.191+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn29: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:35.191+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-10-24T13:33:35.191+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:35.241+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:35.241+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:35.241+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:35.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:35.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:35.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:35.243+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:35.244+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:35.244+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:35.245+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:35.246+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:35.247+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:35.247+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:35.368+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:35.368+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:35.368+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:35.369+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:33:35.376+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.351 seconds (process running for 8.002)
2025-10-24T13:33:35.378+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:35.428+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:35.429+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:35.430+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:35.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:35.534+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:35.538+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:35.543+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:33:35.543+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:33:35.545+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:35.546+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:35.547+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:33:35.547+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:33:35.555+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:35.557+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin deleting user with ID=2
2025-10-24T13:33:35.557+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for ownerId=2 (from DB)
2025-10-24T13:33:35.560+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0 
    where
        c1_0.owner_id=?
2025-10-24T13:33:35.561+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : User 2 has 1 creatures to delete
2025-10-24T13:33:35.562+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è Deleting creature 1 by user pippin@shire.me
2025-10-24T13:33:35.563+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:35.565+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 deleted successfully.
2025-10-24T13:33:35.565+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Deleted creature ID=1 belonging to user ID=2
2025-10-24T13:33:35.566+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : User deleted successfully: ID=2
2025-10-24T13:33:35.568+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:35.571+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    delete 
    from
        creatures 
    where
        id=?
2025-10-24T13:33:35.572+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    delete 
    from
        users 
    where
        id=?
2025-10-24T13:33:35.573+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0
2025-10-24T13:33:35.583+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:35.583+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:35.585+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:35.586+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:35.586+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:35.587+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-10-24T13:33:35.588+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-10-24T13:33:35.616+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:35.616+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:35.616+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:33:35.711+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:35.721+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:35.759+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:35.760+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:35.766+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:35.766+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-10-24T13:33:35.767+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn39: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:35.767+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-10-24T13:33:35.768+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:35.814+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:35.814+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:35.815+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:35.815+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:35.815+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:35.815+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:35.816+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:35.817+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:35.817+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:35.818+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:35.818+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:35.819+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:35.820+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:35.948+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:35.948+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:35.948+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:35.949+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:33:35.952+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.362 seconds (process running for 8.579)
2025-10-24T13:33:35.954+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.009+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:36.011+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:36.011+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:36.127+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:36.203+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:36.210+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.220+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:33:36.221+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:33:36.224+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.226+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:36.228+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:33:36.228+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:33:36.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.245+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin requested list of all users
2025-10-24T13:33:36.247+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0
2025-10-24T13:33:36.255+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-10-24T13:33:36.259+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Found 3 users in database
2025-10-24T13:33:36.273+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:36.273+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:36.274+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:36.274+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:36.275+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:36.275+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-10-24T13:33:36.276+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-10-24T13:33:36.280+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.AuthIntegrationTest]: AuthIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:33:36.283+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.AuthIntegrationTest
2025-10-24T13:33:36.309+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:36.309+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:36.309+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:33:36.393+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:36.400+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:36.430+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:36.431+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:36.436+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:36.437+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-10-24T13:33:36.437+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection conn49: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:36.437+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-10-24T13:33:36.438+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:36.483+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:36.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:36.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:36.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:36.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:36.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:36.484+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:36.485+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:36.485+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:36.486+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:36.486+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:36.487+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:36.488+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:36.593+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:36.593+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:36.593+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:36.593+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:36.596+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.312 seconds (process running for 9.223)
2025-10-24T13:33:36.598+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.658+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:36.659+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:36.660+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:36.711+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:36.747+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:33:36.749+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:36.800+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login success email=frodo@shire.me
2025-10-24T13:33:36.808+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:36.808+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:36.808+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:36.809+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:36.809+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:36.810+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-10-24T13:33:36.816+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2025-10-24T13:33:36.829+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:36.830+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:36.830+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:33:36.914+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:36.922+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:36.954+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:36.955+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:36.959+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:36.960+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-10-24T13:33:36.961+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection conn57: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:36.961+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-10-24T13:33:36.961+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:37.000+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:37.000+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:37.000+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:37.000+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:37.000+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:37.001+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:37.002+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:37.002+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:37.002+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:37.003+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:37.004+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.004+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.005+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:37.119+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:37.119+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:37.119+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:37.120+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:33:37.123+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.306 seconds (process running for 9.75)
2025-10-24T13:33:37.124+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:37.175+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:37.176+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:37.177+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:37.229+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:37.234+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=gandalf@valinor.me
2025-10-24T13:33:37.235+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:37.242+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:37.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:37.242+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:37.243+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:37.243+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:37.243+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-10-24T13:33:37.255+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2025-10-24T13:33:37.270+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:37.270+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:37.270+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:33:37.354+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:37.360+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:37.391+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:37.393+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:37.397+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:37.398+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-10-24T13:33:37.398+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection conn64: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:37.398+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-10-24T13:33:37.399+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:37.434+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:37.434+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:37.434+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:37.434+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:37.434+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:37.435+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:37.435+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:37.436+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:37.436+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:37.437+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:37.437+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.438+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.438+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:37.541+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:37.541+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:37.541+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:37.541+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:37.544+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.287 seconds (process running for 10.172)
2025-10-24T13:33:37.546+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:37.598+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:37.599+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:37.599+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:37.658+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:37.663+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:33:37.664+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:37.721+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:37.721+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:37.722+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:37.722+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:37.722+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:37.722+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-10-24T13:33:37.741+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2025-10-24T13:33:37.748+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.CreatureIntegrationTest]: CreatureIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:33:37.752+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.CreatureIntegrationTest
2025-10-24T13:33:37.775+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:37.775+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:37.775+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:33:37.876+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:37.886+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:37.913+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:37.915+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:37.919+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:37.920+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-10-24T13:33:37.921+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection conn72: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:37.921+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-10-24T13:33:37.921+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:37.955+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:37.955+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:37.955+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:37.955+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:37.955+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:37.955+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:37.956+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:37.957+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:37.957+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:37.957+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:37.958+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.959+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:37.959+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:38.058+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:38.058+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:38.058+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:38.058+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:38.061+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.303 seconds (process running for 10.688)
2025-10-24T13:33:38.063+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.118+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:38.119+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:38.120+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:38.177+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:38.181+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:38.181+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:38.182+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:38.182+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:38.182+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:38.183+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-10-24T13:33:38.215+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2025-10-24T13:33:38.232+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:38.232+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:38.232+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:33:38.314+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:38.320+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:38.349+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:38.350+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:38.355+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:38.355+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-10-24T13:33:38.356+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection conn79: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:38.356+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-10-24T13:33:38.356+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:38.386+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:38.387+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:38.387+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:38.387+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:38.387+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:38.387+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:38.388+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:38.388+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:38.389+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:38.389+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:38.390+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:38.390+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:38.391+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:38.486+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:38.486+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:38.486+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:38.487+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:33:38.490+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.272 seconds (process running for 11.116)
2025-10-24T13:33:38.491+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.542+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:38.543+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:38.544+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:38.597+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:38.601+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.604+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Gwaihir'
2025-10-24T13:33:38.604+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:33:38.605+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.606+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:38.607+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Gwaihir' created with ID 1
2025-10-24T13:33:38.607+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:33:38.611+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.613+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me requesting creature details id=1
2025-10-24T13:33:38.614+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üîç Fetching creature by ID 1 (from DB)
2025-10-24T13:33:38.614+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.615+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature retrieved successfully id=1, owner=sam@shire.me
2025-10-24T13:33:38.618+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.619+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me deleting creature id=1
2025-10-24T13:33:38.620+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è Deleting creature 1 by user sam@shire.me
2025-10-24T13:33:38.621+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.621+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 deleted successfully.
2025-10-24T13:33:38.621+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature deleted successfully id=1 by user sam@shire.me
2025-10-24T13:33:38.623+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:38.624+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:38.624+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:38.624+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:38.624+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:38.624+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-10-24T13:33:38.636+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2025-10-24T13:33:38.652+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:38.652+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:38.652+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:33:38.721+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:38.730+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:38.755+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:38.756+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:38.760+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:38.761+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2025-10-24T13:33:38.762+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection conn85: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:38.763+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2025-10-24T13:33:38.763+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:38.804+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:38.804+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:38.805+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:38.805+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:38.805+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:38.805+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:38.806+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:38.807+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:38.808+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:38.808+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:38.809+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:38.810+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:38.811+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:38.896+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:38.896+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:38.896+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:38.896+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:38.899+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.262 seconds (process running for 11.526)
2025-10-24T13:33:38.900+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:38.951+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:38.952+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:38.953+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:39.038+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:39.042+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.045+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Bill'
2025-10-24T13:33:39.046+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:33:39.047+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.047+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:39.048+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Bill' created with ID 1
2025-10-24T13:33:39.048+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:33:39.053+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.055+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me training creature id=1
2025-10-24T13:33:39.055+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üèãÔ∏è Training creature 1 by user sam@shire.me
2025-10-24T13:33:39.056+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.058+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 trained. New level: 1
2025-10-24T13:33:39.058+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature trained id=1, level=1, XP=10
2025-10-24T13:33:39.063+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.064+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me resting creature id=1
2025-10-24T13:33:39.064+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üò¥ Resting creature 1 by user sam@shire.me
2025-10-24T13:33:39.065+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.065+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 rested. Current health: 110
2025-10-24T13:33:39.065+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature rested id=1, newHealth=110
2025-10-24T13:33:39.069+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:39.069+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:39.069+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:39.069+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:39.069+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:39.070+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2025-10-24T13:33:39.073+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2025-10-24T13:33:39.090+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:39.090+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:39.090+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:33:39.156+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:39.164+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:39.190+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:39.191+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:39.195+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:39.195+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2025-10-24T13:33:39.196+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection conn92: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:39.196+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2025-10-24T13:33:39.196+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:39.232+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:39.232+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:39.233+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:39.233+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:39.233+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:39.233+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:39.235+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:39.238+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:39.239+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:39.240+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:39.241+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:39.241+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:39.242+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:39.332+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:33:39.332+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:33:39.332+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:33:39.332+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:33:39.335+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.257 seconds (process running for 11.961)
2025-10-24T13:33:39.336+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.385+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:39.386+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:39.386+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:39.438+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:39.442+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.445+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Shadowfax'
2025-10-24T13:33:39.445+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:33:39.446+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.447+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:33:39.448+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Shadowfax' created with ID 1
2025-10-24T13:33:39.448+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:33:39.452+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0
2025-10-24T13:33:39.456+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:39.456+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:39.456+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:39.457+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:39.457+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:39.457+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2025-10-24T13:33:39.465+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2025-10-24T13:33:39.467+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.TolkienPetsApplicationTests]: TolkienPetsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:33:39.468+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.TolkienPetsApplicationTests
2025-10-24T13:33:39.483+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Starting TolkienPetsApplicationTests using Java 21.0.8 with PID 39464 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:33:39.483+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:33:39.483+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : The following 1 profile is active: "test"
2025-10-24T13:33:39.550+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:33:39.556+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:33:39.579+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:33:39.582+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:33:39.586+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:33:39.586+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2025-10-24T13:33:39.587+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection conn98: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:33:39.587+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2025-10-24T13:33:39.587+02:00  WARN 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:33:39.633+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:33:39.634+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:39.634+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:39.634+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:39.634+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:39.634+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:33:39.635+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:33:39.635+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:33:39.636+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:33:39.636+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:33:39.637+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:33:39.637+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:33:39.638+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:39.729+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Started TolkienPetsApplicationTests in 0.258 seconds (process running for 12.356)
2025-10-24T13:33:39.730+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:33:39.782+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:33:39.783+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:39.783+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:33:39.823+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:33:39.823+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:33:39.824+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:33:39.824+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:33:39.824+02:00 DEBUG 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:33:39.825+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2025-10-24T13:33:39.838+02:00  INFO 39464 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2025-10-24T13:37:23.017+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:23.017+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:23.018+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:37:23.740+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:23.789+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 42 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:24.400+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:24.472+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-24T13:37:24.495+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:24.725+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:24.743+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-10-24T13:37:24.854+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:24.856+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-10-24T13:37:24.873+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:25.534+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:25.545+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:25.549+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:25.549+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:25.550+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:25.555+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:25.568+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:25.571+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:25.572+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:25.575+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:25.591+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:25.595+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:25.601+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:27.006+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:27.007+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:27.007+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:27.008+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:27.035+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 4.271 seconds (process running for 5.079)
2025-10-24T13:37:27.129+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:27.219+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:27.234+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:27.234+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:27.729+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:27.777+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:27.851+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:27.894+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:37:27.897+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:37:27.898+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:27.900+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:27.902+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:37:27.902+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:37:27.930+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:27.934+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin attempting to delete creature with ID=1
2025-10-24T13:37:27.934+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è [ADMIN] Deleting creature ID 1
2025-10-24T13:37:27.943+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Creature deleted successfully by admin: ID=1
2025-10-24T13:37:27.983+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:27.984+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:27.986+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:27.988+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:27.989+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:27.990+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-10-24T13:37:27.992+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-10-24T13:37:28.028+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:28.029+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:28.029+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:37:28.165+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:28.188+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:28.235+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:28.237+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:28.242+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:28.243+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-10-24T13:37:28.243+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:28.244+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-10-24T13:37:28.244+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:28.307+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:28.308+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:28.308+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:28.308+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:28.308+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:28.309+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:28.310+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:28.310+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:28.311+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:28.311+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:28.312+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:28.313+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:28.315+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:28.485+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:28.485+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:28.485+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:28.485+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:28.489+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.489 seconds (process running for 6.533)
2025-10-24T13:37:28.491+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:28.544+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:28.546+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:28.546+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:28.603+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:28.655+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:28.660+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:28.664+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:37:28.665+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:37:28.666+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:28.667+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:28.668+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:37:28.668+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:37:28.678+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:28.684+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:28.684+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:28.685+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:28.687+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:28.687+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:28.688+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-10-24T13:37:28.689+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-10-24T13:37:28.715+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:28.715+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:28.715+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:37:28.833+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:28.843+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:28.890+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:28.893+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:28.899+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:28.900+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-10-24T13:37:28.901+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection conn20: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:28.901+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-10-24T13:37:28.901+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:28.967+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:28.968+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:28.968+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:28.968+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:28.969+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:28.970+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:28.971+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:28.972+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:28.973+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:28.973+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:28.974+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:28.976+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:28.977+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:29.125+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:29.125+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:29.125+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:29.126+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:29.130+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.438 seconds (process running for 7.174)
2025-10-24T13:37:29.132+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.187+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.188+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:29.189+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:29.253+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.306+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.311+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.316+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:37:29.316+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:37:29.317+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.318+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:29.319+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:37:29.319+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:37:29.327+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.329+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin fetching creatures for user ID=2
2025-10-24T13:37:29.333+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for userId=2 (from DB)
2025-10-24T13:37:29.341+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0 
    where
        c1_0.owner_id=?
2025-10-24T13:37:29.342+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Found 1 creatures for user ID=2
2025-10-24T13:37:29.369+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:29.369+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:29.370+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:29.371+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:29.373+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:29.373+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-10-24T13:37:29.374+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-10-24T13:37:29.392+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:29.392+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:29.392+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:37:29.495+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:29.503+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:29.538+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:29.540+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:29.545+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:29.545+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-10-24T13:37:29.546+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection conn30: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:29.546+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-10-24T13:37:29.547+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:29.604+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:29.605+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:29.605+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:29.606+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:29.606+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:29.606+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:29.607+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:29.608+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:29.609+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:29.609+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:29.611+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:29.612+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:29.613+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:29.741+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:29.741+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:29.741+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:29.741+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:29.746+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.37 seconds (process running for 7.79)
2025-10-24T13:37:29.748+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.798+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.800+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:29.800+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:29.855+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.904+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:29.910+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.914+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:37:29.915+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:37:29.916+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.918+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:29.919+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:37:29.919+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:37:29.926+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.928+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin deleting user with ID=2
2025-10-24T13:37:29.929+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üì• Fetching creatures for ownerId=2 (from DB)
2025-10-24T13:37:29.931+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0 
    where
        c1_0.owner_id=?
2025-10-24T13:37:29.932+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : User 2 has 1 creatures to delete
2025-10-24T13:37:29.934+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è Deleting creature 1 by user pippin@shire.me
2025-10-24T13:37:29.935+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:29.936+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 deleted successfully.
2025-10-24T13:37:29.936+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Deleted creature ID=1 belonging to user ID=2
2025-10-24T13:37:29.937+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : User deleted successfully: ID=2
2025-10-24T13:37:29.941+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:29.944+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    delete 
    from
        creatures 
    where
        id=?
2025-10-24T13:37:29.945+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    delete 
    from
        users 
    where
        id=?
2025-10-24T13:37:29.945+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0
2025-10-24T13:37:29.953+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:29.953+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:29.953+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:29.953+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:29.954+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:29.954+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-10-24T13:37:29.955+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-10-24T13:37:29.980+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Starting AdminIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:29.980+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:29.980+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : The following 1 profile is active: "test"
2025-10-24T13:37:30.066+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:30.076+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:30.108+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:30.110+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:30.115+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:30.115+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-10-24T13:37:30.116+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection conn40: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:30.116+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-10-24T13:37:30.116+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:30.157+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:30.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:30.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:30.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:30.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:30.158+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:30.158+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:30.159+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:30.159+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:30.160+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:30.160+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:30.161+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:30.162+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:30.280+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:30.280+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:30.280+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:30.281+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:30.284+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AdminIntegrationTest    : Started AdminIntegrationTest in 0.327 seconds (process running for 8.328)
2025-10-24T13:37:30.286+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:30.342+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:30.343+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:30.343+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:30.445+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:30.528+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:30.537+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:30.544+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User pippin@shire.me creating new creature 'Treebeard'
2025-10-24T13:37:30.545+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: pippin@shire.me
2025-10-24T13:37:30.547+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:30.548+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:30.549+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Treebeard' created with ID 1
2025-10-24T13:37:30.549+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user pippin@shire.me
2025-10-24T13:37:30.558+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:30.560+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Admin requested list of all users
2025-10-24T13:37:30.561+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0
2025-10-24T13:37:30.566+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        r1_0.user_id,
        r1_0.role 
    from
        user_roles r1_0 
    where
        r1_0.user_id=?
2025-10-24T13:37:30.568+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AdminController      : Found 3 users in database
2025-10-24T13:37:30.582+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:30.582+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:30.583+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:30.583+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:30.583+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:30.584+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-10-24T13:37:30.585+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-10-24T13:37:30.590+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.AuthIntegrationTest]: AuthIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:37:30.593+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.AuthIntegrationTest
2025-10-24T13:37:30.622+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:30.623+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:30.623+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:37:30.719+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:30.728+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:30.759+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:30.760+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:30.765+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:30.766+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-10-24T13:37:30.767+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection conn50: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:30.767+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-10-24T13:37:30.767+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:30.809+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:30.809+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:30.810+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:30.810+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:30.810+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:30.810+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:30.811+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:30.811+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:30.812+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:30.812+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:30.813+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:30.813+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:30.814+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:30.924+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:30.924+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:30.924+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:30.925+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:30.927+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.332 seconds (process running for 8.971)
2025-10-24T13:37:30.929+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:30.983+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:30.984+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:30.985+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:31.037+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:31.069+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:37:31.070+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:31.126+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login success email=frodo@shire.me
2025-10-24T13:37:31.135+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:31.135+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:31.135+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:31.136+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:31.136+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:31.136+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-10-24T13:37:31.154+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2025-10-24T13:37:31.178+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:31.178+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:31.178+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:37:31.272+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:31.279+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:31.309+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:31.312+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:31.316+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:31.316+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-10-24T13:37:31.317+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection conn60: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:31.317+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-10-24T13:37:31.317+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:31.366+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:31.366+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:31.366+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:31.366+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:31.367+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:31.367+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:31.368+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:31.369+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:31.369+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:31.369+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:31.370+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:31.371+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:31.372+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:31.475+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:31.475+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:31.475+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:31.476+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:31.479+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.322 seconds (process running for 9.522)
2025-10-24T13:37:31.480+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:31.532+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:31.533+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:31.533+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:31.593+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:31.597+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=gandalf@valinor.me
2025-10-24T13:37:31.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:31.605+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:31.605+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:31.605+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:31.606+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:31.606+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:31.606+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-10-24T13:37:31.609+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2025-10-24T13:37:31.625+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Starting AuthIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:31.625+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:31.625+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : The following 1 profile is active: "test"
2025-10-24T13:37:31.705+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:31.711+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:31.742+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:31.744+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:31.749+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:31.750+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-10-24T13:37:31.751+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection conn67: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:31.751+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-10-24T13:37:31.751+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:31.801+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:31.801+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:31.801+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:31.801+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:31.801+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:31.801+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:31.802+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:31.803+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:31.803+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:31.804+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:31.804+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:31.805+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:31.806+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:31.914+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:31.914+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:31.914+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:31.914+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:31.918+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.AuthIntegrationTest     : Started AuthIntegrationTest in 0.306 seconds (process running for 9.962)
2025-10-24T13:37:31.919+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:31.973+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:31.974+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:31.975+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:32.037+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:32.043+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.AuthController       : Login attempt email=frodo@shire.me
2025-10-24T13:37:32.044+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.101+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:32.101+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:32.101+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:32.102+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:32.102+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:32.102+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-10-24T13:37:32.142+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2025-10-24T13:37:32.150+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.CreatureIntegrationTest]: CreatureIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:37:32.153+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.CreatureIntegrationTest
2025-10-24T13:37:32.177+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:32.178+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:32.178+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:37:32.271+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:32.280+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:32.308+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:32.310+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:32.314+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:32.314+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-10-24T13:37:32.315+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection conn76: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:32.315+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-10-24T13:37:32.315+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:32.358+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:32.359+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:32.359+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:32.359+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:32.359+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:32.359+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:32.360+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:32.361+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:32.361+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:32.362+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:32.363+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:32.363+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:32.364+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:32.458+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:32.458+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:32.458+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:32.458+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:32.461+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.304 seconds (process running for 10.505)
2025-10-24T13:37:32.462+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.511+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:32.512+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:32.513+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:32.566+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:32.570+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:32.570+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:32.571+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:32.571+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:32.571+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:32.572+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-10-24T13:37:32.580+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2025-10-24T13:37:32.593+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:32.593+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:32.593+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:37:32.666+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:32.674+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:32.701+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:32.702+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:32.707+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:32.707+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-10-24T13:37:32.708+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection conn82: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:32.708+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-10-24T13:37:32.708+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:32.745+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:32.745+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:32.746+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:32.746+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:32.746+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:32.746+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:32.747+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:32.747+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:32.747+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:32.748+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:32.748+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:32.749+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:32.750+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:32.852+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:32.852+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:32.852+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:32.852+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:32.855+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.274 seconds (process running for 10.899)
2025-10-24T13:37:32.857+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.907+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:32.908+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:32.908+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:32.960+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:32.964+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.967+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Gwaihir'
2025-10-24T13:37:32.968+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:37:32.969+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.970+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:32.971+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Gwaihir' created with ID 1
2025-10-24T13:37:32.971+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:37:32.975+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.977+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me requesting creature details id=1
2025-10-24T13:37:32.978+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üîç Fetching creature by ID 1 (from DB)
2025-10-24T13:37:32.978+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.979+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature retrieved successfully id=1, owner=sam@shire.me
2025-10-24T13:37:32.982+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.984+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me deleting creature id=1
2025-10-24T13:37:32.984+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üóëÔ∏è Deleting creature 1 by user sam@shire.me
2025-10-24T13:37:32.985+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:32.986+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 deleted successfully.
2025-10-24T13:37:32.986+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature deleted successfully id=1 by user sam@shire.me
2025-10-24T13:37:32.988+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:32.988+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:32.988+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:32.989+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:32.989+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:32.989+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-10-24T13:37:32.999+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2025-10-24T13:37:33.011+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:33.012+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:33.012+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:37:33.082+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:33.089+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:33.119+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:33.120+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:33.124+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:33.124+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2025-10-24T13:37:33.125+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection conn89: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:33.125+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2025-10-24T13:37:33.125+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:33.156+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:33.156+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:33.156+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:33.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:33.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:33.157+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:33.158+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:33.158+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:33.159+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:33.159+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:33.160+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:33.160+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:33.161+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:33.248+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:33.248+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:33.248+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:33.249+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
2025-10-24T13:37:33.251+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.251 seconds (process running for 11.295)
2025-10-24T13:37:33.253+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.308+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:33.310+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:33.310+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:33.375+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:33.381+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.384+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Bill'
2025-10-24T13:37:33.385+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:37:33.386+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.387+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:33.387+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Bill' created with ID 1
2025-10-24T13:37:33.387+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:37:33.393+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.395+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me training creature id=1
2025-10-24T13:37:33.395+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üèãÔ∏è Training creature 1 by user sam@shire.me
2025-10-24T13:37:33.396+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.398+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 trained. New level: 1
2025-10-24T13:37:33.398+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature trained id=1, level=1, XP=10
2025-10-24T13:37:33.402+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.403+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me resting creature id=1
2025-10-24T13:37:33.403+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : üò¥ Resting creature 1 by user sam@shire.me
2025-10-24T13:37:33.404+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.405+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 1 rested. Current health: 110
2025-10-24T13:37:33.405+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature rested id=1, newHealth=110
2025-10-24T13:37:33.407+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:33.408+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:33.408+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:33.408+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:33.408+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:33.409+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2025-10-24T13:37:33.420+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2025-10-24T13:37:33.441+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Starting CreatureIntegrationTest using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:33.442+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:33.442+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : The following 1 profile is active: "test"
2025-10-24T13:37:33.517+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:33.525+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:33.553+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:33.554+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:33.558+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:33.559+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2025-10-24T13:37:33.559+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection conn96: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:33.559+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2025-10-24T13:37:33.559+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:33.597+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:33.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:33.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:33.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:33.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:33.598+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:33.600+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:33.600+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:33.601+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:33.601+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:33.602+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:33.603+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:33.604+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:33.703+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] com.tolkien.pets.security.JwtFilter      : Filter 'jwtFilter' configured for use
2025-10-24T13:37:33.703+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-10-24T13:37:33.703+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-10-24T13:37:33.703+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-10-24T13:37:33.706+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.tolkien.pets.CreatureIntegrationTest   : Started CreatureIntegrationTest in 0.283 seconds (process running for 11.75)
2025-10-24T13:37:33.707+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.760+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:33.761+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:33.762+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:33.816+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:33.820+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.823+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : User sam@shire.me creating new creature 'Shadowfax'
2025-10-24T13:37:33.823+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ü™Ñ Creating creature for user: sam@shire.me
2025-10-24T13:37:33.824+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:33.825+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        creatures
        (attack, character_class, defense, experience, health, image_url, in_combat, level, name, owner_id, race, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, default)
2025-10-24T13:37:33.825+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.p.service.impl.CreatureServiceImpl   : ‚úÖ Creature 'Shadowfax' created with ID 1
2025-10-24T13:37:33.826+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.controller.CreatureController   : Creature created successfully id=1 for user sam@shire.me
2025-10-24T13:37:33.829+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        c1_0.id,
        c1_0.attack,
        c1_0.character_class,
        c1_0.defense,
        c1_0.experience,
        c1_0.health,
        c1_0.image_url,
        c1_0.in_combat,
        c1_0.level,
        c1_0.name,
        c1_0.owner_id,
        c1_0.race 
    from
        creatures c1_0
2025-10-24T13:37:33.831+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:33.831+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:33.832+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:33.833+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:33.833+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:33.833+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2025-10-24T13:37:33.857+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2025-10-24T13:37:33.862+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.tolkien.pets.TolkienPetsApplicationTests]: TolkienPetsApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-24T13:37:33.864+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.tolkien.pets.TolkienVirtualPetsApiApplication for test class com.tolkien.pets.TolkienPetsApplicationTests
2025-10-24T13:37:33.887+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Starting TolkienPetsApplicationTests using Java 21.0.8 with PID 20976 (started by solen in C:\dev\PetRepo\tolkien-virtual-pets-api\tolkien-virtual-pets-api\backend)
2025-10-24T13:37:33.887+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Running with Spring Boot v3.3.4, Spring v6.1.13
2025-10-24T13:37:33.887+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : The following 1 profile is active: "test"
2025-10-24T13:37:33.951+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24T13:37:33.958+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-24T13:37:33.981+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24T13:37:33.982+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-10-24T13:37:33.986+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24T13:37:33.987+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2025-10-24T13:37:33.987+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection conn103: url=jdbc:h2:mem:testdb user=SA
2025-10-24T13:37:33.987+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2025-10-24T13:37:33.987+02:00  WARN 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-24T13:37:34.039+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24T13:37:34.039+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:34.039+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:34.039+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:34.039+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:34.040+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table creatures (
        attack integer not null,
        defense integer not null,
        experience integer not null,
        health integer not null,
        in_combat boolean not null,
        level integer not null,
        id bigint generated by default as identity,
        owner_id bigint,
        image_url varchar(255),
        name varchar(255) not null,
        race varchar(255) not null,
        character_class enum ('ASESINO','BARBARO','BARDO','BRUJO','CABALLERO','CLERIGO','DRUIDA','EXPLORADOR','LADRON','MAGO','MONJE','PALADIN') not null,
        primary key (id)
    )
2025-10-24T13:37:34.040+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table refresh_tokens (
        expiry_date timestamp(6) with time zone not null,
        id bigint generated by default as identity,
        user_id bigint not null,
        token varchar(255) not null unique,
        primary key (id)
    )
2025-10-24T13:37:34.041+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table user_roles (
        user_id bigint not null,
        role enum ('ROLE_ADMIN','ROLE_USER')
    )
2025-10-24T13:37:34.041+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    create table users (
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        password varchar(255) not null,
        profile_image varchar(255),
        primary key (id)
    )
2025-10-24T13:37:34.041+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists creatures 
       add constraint FKgqmoa3lyh69qpe44ibuu0kwyc 
       foreign key (owner_id) 
       references users
2025-10-24T13:37:34.042+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists refresh_tokens 
       add constraint FK1lih5y2npsf8u5o3vhdb9y0os 
       foreign key (user_id) 
       references users
2025-10-24T13:37:34.043+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    alter table if exists user_roles 
       add constraint FKhfh9dx7w3ubf1co1vdev94g3f 
       foreign key (user_id) 
       references users
2025-10-24T13:37:34.044+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:34.125+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [main] c.t.pets.TolkienPetsApplicationTests     : Started TolkienPetsApplicationTests in 0.258 seconds (process running for 12.169)
2025-10-24T13:37:34.126+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    select
        u1_0.id,
        u1_0.email,
        u1_0.password,
        u1_0.profile_image 
    from
        users u1_0 
    where
        u1_0.email=?
2025-10-24T13:37:34.177+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        users
        (email, password, profile_image, id) 
    values
        (?, ?, ?, default)
2025-10-24T13:37:34.178+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:34.178+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [main] org.hibernate.SQL                        : 
    insert 
    into
        user_roles
        (user_id, role) 
    values
        (?, ?)
2025-10-24T13:37:34.216+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-24T13:37:34.217+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists creatures cascade 
2025-10-24T13:37:34.217+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists refresh_tokens cascade 
2025-10-24T13:37:34.217+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists user_roles cascade 
2025-10-24T13:37:34.218+02:00 DEBUG 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] org.hibernate.SQL                        : 
    drop table if exists users cascade 
2025-10-24T13:37:34.218+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2025-10-24T13:37:34.248+02:00  INFO 20976 --- [tolkien-virtual-pets-api] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
